# Gemini Chat — Backlog

> 最后更新：2026-02-25

## 🔥 正在解决



---

## 待开发功能

### 🔴 高优先级

- [x] **流式图片生成进度** — 当前图片生成无中间态反馈，仅显示"正在生成" (已用骨架屏方案实现完结)

### 🟡 中优先级

- [x] **图片生成模型真正调用 Function Calling** — 当前部分模型仍以 JSON 文本模拟工具调用，需验证 @ai-sdk/google 对自定义工具的支持 (已通过伪 JSON 正则降级提取与强制 toolChoice 完美解决)
- [ ] **代码块语法高亮** — 当前 Markdown 渲染中代码块无语法高亮
- [ ] **消息编辑/重新生成** — 支持编辑已发送消息或重新生成 AI 回复
- [ ] **多模型对比** — 同一问题发送到多个模型，对比回答
- [ ] **会话导出/导入** — 支持导出聊天记录为 JSON / Markdown，便于备份迁移

### 🟢 低优先级

- [ ] **PWA 推送通知** — 后台任务完成后推送通知
- [ ] **会话搜索** — 在会话列表中搜索历史对话
- [ ] **自定义主题色** — 除跟随系统外，支持手动选择主题风格
- [ ] **manifest.json 中 related_applications URL 更新** — 当前为占位 URL `https://nonexistent.com`

## 已知问题

- [ ] `manifest.json` 中 icon-512 的 sizes 字段为 `511x511`，应为 `512x512`
- [ ] 无速率限制 — API 路由缺少请求频率控制
- [ ] 大量会话时列表性能 — `getAllConversations()` 逐一读取，无分页
- [x] 向量记忆 HNSW 索引 — 当前因 pgvector 3072维限制使用 KNN 暴力扫描，由于定位于个人级对话历史记录(数据量级在百万线内)，精确扫描即可保障数十毫秒极速同时提供100%零损耗命中率。这是系统最终采纳的最优架构决策，已放弃向 768维 的倒退与切片妥协。
